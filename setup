#!/bin/bash

sudo apt-get -y update
sudo apt-get -y install git-core
git config --global user.name "Vic Goldfeld"
git config --global user.email "vic@longstorm.org"
git config --global push.default simple

sudo apt-get -y install automake autoconf pkg-config bison flex build-essential curl gcc g++ checkinstall
sudo apt-get -y install haskell-platform

mkdir -p /usr/local/bin
mkdir -p ~/.emacs.d && mkdir -p ~/.xmonad
mkdir -p ~/goldfeld && git clone https://github.com/goldfeld/dotfiles ~/goldfeld
cd ~/goldfeld/dotfiles
git remote rm origin && git remote add origin git@github.com:goldfeld/dotfiles

ln -s vimrc ~/.vimrc
ln -s bashrc ~/.bashrc
ln -s init.el ~/.emacs.d/init.el
ln -s xinitrc ~/.xinitrc
ln -s Xmodmap ~/.Xmodmap
ln -s pentadactylrc ~/.pentadactylrc
ln -s wifi ~/wifi
cp xmonad.hs ~/.xmonad/xmonad.hs
ghc --make hooker.hs && sudo mv hooker /usr/local/bin/ && rm hooker.o hooker.hi
cd ~

sudo apt-get -y install ruby-dev rubygems rake

# vundle
mkdir -p ~/.vim/bundle
git clone https://github.com/gmarik/vundle ~/.vim/bundle/vundle

# dmenu with ^M working as Return 
git clone https://github.com/goldfeld/dmenu ~/dmenu
cd ~/dmenu && make && sudo make install && cd ~

# xcape
sudo apt-get -y install libxtst-dev
git clone https://github.com/alols/xcape ~/xcape
cd ~/xcape && make && sudo mv xcape /usr/bin/ && cd ~

# heroku toolbelt (cli)
sudo wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh

# deps respectively for: battery info, github ssh, vim-reload-linux, tnt.vim
sudo apt-get -y install acpi xclip xdotool recode

# termite
sudo apt-get -y install vte-2.90
git clone --recursive https://github.com/thestinger/termite.git ~/termite
cd ~/termite && make & cd ~

# nodejs
sudo apt-key adv --keyserver pgp.mit.edu --recv-keys 5044912E
sudo add-apt-repository -y ppa:mitya57
sudo apt-get -y update
sudo apt-get -y install libssl-dev openssh-server

ver="0.10.4"
echo Installing node version $ver
cd ~
wget http://nodejs.org/dist/v$ver/node-v$ver.tar.gz
tar -zxf node-v$ver.tar.gz
cd node-v$ver
./configure --prefix=/usr/local
make
sudo checkinstall --install=yes --pkgname=nodejs --pkgversion "$ver" --default

# meteor
curl https://install.meteor.com | /bin/sh
sudo -H npm install -g meteorite

sudo npm install -g grunt-cli
sudo npm install -g dustjs-linkedin

# luakit
sudo apt-get -y install libx11-dev libxtst-dev sqlite3 webkit-1.0 socat glib-2.0 liblua5.1-0-dev liblua5.1-filesystem0 libsqlite3-dev libwebkitgtk-dev libwebkitgtk-3.0-dev unique-1.0 libunique-dev libncurses5-dev libncursesw5-dev luarocks

ssh-keygen -t rsa -C "vic@longstorm.org"
ssh-add ~/.ssh/id_rsa
xclip -sel clip < ~/.ssh/id_rsa.pub
